<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width"/>
  <title>HELLO, AMAP!</title>
  <style>
    html,
    body,
    #container {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }
    #map-container {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      padding: 0;
      background-color: #333;
      color: white;
      font-family: Arial, sans-serif;
    }

    .floating-container {
      border-radius: 15px;
      font-size: xx-small;
      position: fixed;
      top: 68px;
      right: 0;
      max-height: 320px;
      width: 450px;
      height: auto;
      background-color: rgba(26, 35, 44, 0.8);
      overflow: hidden;
      transition: transform 1s ease;
      margin-right: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .floating-container-left {
      margin-left: 10px;
      border-radius: 15px;
      font-size: xx-small;
      position: fixed;
      top: 68px;
      max-height: 700px;
      width: 400px;
      height: auto;
      background-color: rgba(26, 35, 44, 0.8);
      overflow: hidden;
      transition: transform 1s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .floating-right {
      position: fixed;
      top: 0;
      right: 0;
    }

    .floating-left {
      position: fixed;
      top: 0;
    }

    .floating-container.slide-out{
      transform: translateX(90%);
    }

    .floating-container-left.slide-out{
      transform: translateX(-90%);
    }

    .inner-container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      margin-bottom: 10px;
    }

    .div1 {
      display: flex;
      justify-content: flex-end;
      padding: 10px;
    }

    .div3 {
      display: flex;
      justify-content: flex-start;
      padding: 10px;
    }

    .div1 img {
      max-width: 100%;
      height: auto;
    }

    .div2 {
      flex-grow: 1;
      max-height: 230px;
      overflow-y: hidden;
      padding-left: 10px;
      padding-right: 10px;
    }

    .div4 {
      flex-grow: 1;
      max-height: 500px;
      overflow-y: scroll;
      padding-left: 10px;
      padding-right: 10px;

      /* 隐藏滚动条但保留功能 */
      -ms-overflow-style: none;  /* IE和Edge */
      scrollbar-width: none;     /* Firefox */
    }

    /* Chrome, Safari, Opera */
    .div4::-webkit-scrollbar {
      display: none;
    }

    /* 添加悬停时显示滚动条（可选） */
    .div4:hover::-webkit-scrollbar {
      display: block;
      width: 6px;
    }

    .div4:hover::-webkit-scrollbar-thumb {
      background: rgba(85, 85, 85, 0.3);
      border-radius: 3px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    table, th, td {
      border: 1px solid #cccccc;
    }

    td {
      padding: 5px;
      width: 150px;
      text-align: center;
    }

    table tr:nth-child(even) {
      background-color: rgba(255, 255, 255, 0.1);
    }

    table tr:nth-child(odd) {
      background-color: rgba(0, 0, 0, 0.1);
    }

    table tr {
      height: 40px;
    }

    .tree {
      list-style-type: none;
      padding-left: 20px;
      min-height: 100%; /* 确保树有最小高度 */
    }
    .tree li {
      position: relative;
      margin: 5px 0;
      padding-left: 20px;
    }

    .tree span {
      cursor: pointer;
      display: inline-block;
      padding: 5px;
      border-radius: 4px;
      transition: background-color 0.3s, color 0.3s;
    }
    .tree span:hover {
      background-color: #555;
      color: #ffd700;
    }

    .tree ul {
      list-style-type: none;
      padding-left: 20px;
    }

    .tree ul ul {
      padding-left: 20px;
    }

    .tree li:before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 10px;
      border-left: 2px solid #fff;
    }

    .tree li:after {
      content: '';
      position: absolute;
      left: 0;
      top: 10px;
      width: 10px;
      height: 10px;
      border-top: 2px solid #fff;
      border-left: 2px solid #fff;
      border-radius: 50%;
      transform: rotate(45deg);
    }

    .tree ul > li:before {
      border-top: 2px solid #fff;
      border-left: none;
    }

    .tree ul > li:after {
      border-left: none;
    }

  </style>

  <script type="text/javascript">
    window._AMapSecurityConfig = {
      securityJsCode: "a3ebf7e0cd7d058fea9a8a315d52642e", //安全密钥
    };

  </script>
  <script src="../../static/plugins/jquery/jquery.js"></script>
  <script src="https://webapi.amap.com/loader.js"></script>
<!--  <script src="http://192.168.0.32:8080/amap/AMap3.js"></script>-->
  <script src="http://192.168.0.32:8080/amap/2.0.1"></script>
  <script src="../../static/plugins/angularjs/angular.min.js"></script>
  <script src="../../static/js/base.js"></script>
  <script src="../../static/js/service/deviceService.js"></script>
  <script src="../../static/js/service/alarmService.js"></script>
  <script src="../../static/js/service/applyService.js"></script>
  <script src="../../static/js/service/regionService.js"></script>
  <script src="../../static/js/service/sessionService.js"></script>
  <script src="../../static/js/controller/indexController.js"></script>


  <script src="../../static/js/filter/dateFilter.js"></script>

</head>
<body ng-app="speed" ng-controller="indexController" ng-init="initMap()" style="padding: 0;margin: 0">
<div id="container"></div>
  <!--左折叠-->
  <div class="floating-left div3" ng-click="toggleSlide1()">
    <img src="../../static/images/left.png" id="left_img" alt="Image">
  </div>
  <!--报警前10条列表框-->
  <div class="floating-container-left"  ng-class="{'slide-out': isSlidOut1}">
  <div class="inner-container" >
    <div style="padding-top: 10px;font-size: small;font-weight: bolder;text-align: center">
      设备定位
    </div>
    <div style="padding-left: 10px;padding-right: 10px">
    </div>
    <div class="div4">

      <ul class="tree">
        <li ng-repeat="server in treeData1">
          <span ng-click="toggleNode(server)">{{ server.server }}</span>
          <ul ng-if="server.regionAndSubRegionAndDeviceList" ng-show="server.expanded">
            <li ng-repeat="region in server.regionAndSubRegionAndDeviceList">
              <span ng-click="toggleNode(region)">{{ region.region }}</span>
              <ul ng-if="region.subRegionAndDeviceList" ng-show="region.expanded">
                <li ng-repeat="subRegion in region.subRegionAndDeviceList">
                  <span ng-click="toggleNode(subRegion)">{{ subRegion.subRegion }}</span>
                  <ul ng-if="subRegion.deviceList" ng-show="subRegion.expanded">
                    <li ng-repeat="device in subRegion.deviceList" ng-click="moveCameraTo(device.longitude, device.dimension);openInfoWindow(device);">
                      <span>{{ device.deviceName }}</span>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>
  <!--右折叠-->
  <div class="floating-right div1" ng-click="toggleSlide()">
  <img src="../../static/images/right.png" id="right_img" alt="Image">
</div>
  <!--报警前10条列表框-->
  <div class="floating-container"  ng-class="{'slide-out': isSlidOut}">
    <div class="inner-container" >
      <div style="padding-top: 10px;font-size: small;font-weight: bolder;text-align: center">
        报警信息
      </div>
      <div style="padding-left: 10px;padding-right: 10px">
        <table style="border: 0">
          <thead style="border: 0">
          <tr style="border: 0">
            <td style="border: 0;padding: 0">时间</td>
            <td style="border: 0;padding: 0">设备</td>
            <td style="border: 0;padding: 0">报警描述</td>
          </tr>
          </thead>
        </table>
      </div>
      <div class="div2">
        <table>
          <tr ng-repeat="alarm in alarmList">
            <td>{{(alarm.occurDate + alarm.occurTime) | customDateTime }}</td>
            <td>{{alarm.deviceName}}</td>
            <td>{{alarm.alarmDesc}}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <!--shenqing前10条列表框-->
  <div class="floating-container" id="apply_flex"  style="top: 400px" ng-class="{'slide-out': isSlidOut}">
  <div class="inner-container" >
    <div style="padding-top: 10px;font-size: small;font-weight: bolder;text-align: center">
      申请信息
    </div>
    <div style="padding-left: 10px;padding-right: 10px">
      <table style="border: 0">
        <thead style="border: 0">
        <tr style="border: 0">
          <td style="border: 0;padding: 0">时间</td>
          <td style="border: 0;padding: 0">设备</td>
          <td style="border: 0;padding: 0">名称</td>
        </tr>
        </thead>
      </table>
    </div>
    <div class="div2">
      <table>
        <tr ng-repeat="apply in applyList">
          <td>{{apply.applyTime}}</td>
          <td>{{apply.deviceName}}</td>
          <td>{{apply.name}}</td>
        </tr>
      </table>
    </div>
  </div>
</div>
</body>
<script>
  $(document).ready(function (){
    $(".div2").on("wheel", function(event){
      event.preventDefault();
      // 获取当前滚动位置
      var scrollTop = $(this).scrollTop();
      // 根据滚轮方向调整滚动位置
      scrollTop += event.originalEvent.deltaY;
      // 设置新滚动位置
      $(this).scrollTop(scrollTop);
    });

  })
</script>
</html>