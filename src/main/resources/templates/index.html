<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>盛轩远程</title>
    <link rel="icon" href="../static/images/favicon.png" type="image/x-icon">
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
  

    <link rel="stylesheet" href="../static/plugins/admin/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/plugins/admin/adminLTE/css/AdminLTE.min.css">
    <link rel="stylesheet" href="../static/plugins/AdminLTE1/plugins/fontawesome-free/css/all.css">
    <link rel="stylesheet" href="../static/plugins/admin/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="../static/css/admin/style.css">
    
    <script src="../static/plugins/admin/jQuery/jquery-2.2.3.min.js"></script>
    <script src="../static/plugins/admin/bootstrap/js/bootstrap.min.js"></script>
  
    <script src="../static/plugins/admin/adminLTE/js/app.min.js"></script>
    
    <script type="text/javascript">   
		 function SetIFrameHeight(){
		  	  var iframeid=document.getElementById("iframe"); //iframe id
		  	  if (document.getElementById){
		  		iframeid.height =document.documentElement.clientHeight - 110;
			  }

             window.addEventListener('message',function (ev){
                 if(ev.data === 'accessDenied'){
                     iframeid.src = '403.html';
                 }
             })
		 }
    
	</script>
    <script src="../static/plugins/angularjs/angular.min.js"></script>
    <script src="../static/js/base.js"></script>
    <script src="../static/js/service/userInfoService.js"></script>
    <script src="../static/js/service/configService.js"></script>
    <script src="../static/js/service/sessionService.js"></script>
    <script src="../static/js/controller/websocketController.js"></script>
 
</head>

<body class="hold-transition skin-blue sidebar-mini" ng-app="speed" ng-controller="websocketController" ng-init="init()">

    <div class="wrapper">
        <audio id="audio_apply" src="../static/plugins/slient.mp3"></audio>

        <!-- 页面头部 -->
        <header class="main-header">
            <!-- Logo -->
            <a href="/index" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><!--<b>盛轩</b>--><img src="../static/images/logo.png" width="50" height="50"></span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>盛轩电子-远控平台</b></span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <i class="fas fa-bars"></i>
                </a>

                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <!-- 推送的报警信息 Notifications: style can be found in dropdown.less -->
                        <li class="dropdown notifications-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-bell-o"></i>
                                <img src="../static/images/alarm.png" width="15px" height="15px">
                                <span class="label label-danger" id="alarm_num">0</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <!-- inner menu: contains the actual data -->
                                    <ul class="menu" id="alarm_li">
                                        <!--<li>
                                            <a href="#">
                                                <i class="fa fa-user text-red"></i> You changed your username
                                            </a>
                                        </li>-->
                                    </ul>
                                </li>
                                <li class="footer"><a href="admin/pushAlarm.html" ng-click="initAlarmNum()" target="iframe">查看所有报警信息</a></li>
                            </ul>
                        </li>
                        <!-- 管控申请请求 Tasks: style can be found in dropdown.less -->
                        <li class="dropdown tasks-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-flag-o"></i>
                                <img width="15px" height="15px" src="../static/images/apply.png">
                                <span class="label label-warning" id="apply_num">0</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <!-- inner menu: contains the actual data -->
                                    <ul class="menu" id="apply_li">

                                    </ul>
                                </li>
                                <li class="footer">
                                    <a href="admin/apply.html?sessionId={{sessionId}}" ng-click="initApplyNum()" target="iframe">查看所有申请</a>
                                </li>
                            </ul>
                        </li>
                        <!-- User Account: style can be found in dropdown.less -->
                        <li class="dropdown user user-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="../static/plugins/admin/adminLTE/img/user2-160x160.jpg" class="user-image" alt="User Image">
                                <span class="hidden-xs">{{currentUsername}}</span>
                            </a>
                            <ul class="dropdown-menu">
                                <!-- User image -->
                                <li class="user-header">
                                    <img src="../static/plugins/admin/adminLTE/img/user2-160x160.jpg" class="img-circle" alt="User Image">

                                    <p>
                                        {{currentUsername}}
                                    </p>
                                </li>
                                
                                <!-- Menu Footer-->
                                <li class="user-footer">
                                    <div class="pull-left">
                                        <a href="admin/update_user_password.html" target="iframe" class="btn btn-default btn-flat">修改密码</a>
                                    </div>
                                    <div class="pull-right">
                                        <a href="/logout" class="btn btn-default btn-flat">注销</a>
                                    </div>
                                </li>
                            </ul>
                        </li>

                    </ul>
                </div>
            </nav>
        </header>
        <!-- 页面头部 /-->

        <!-- 导航侧栏 -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="../static/plugins/admin/adminLTE/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                    </div>
                    <div class="pull-left info">
                        <p> {{currentUsername}}</p>
                        <a href="#"><i class="fa fa-circle text-success"></i> 在线</a>
                    </div>
                </div>
              
                <!-- /.search form -->


                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu"  >
                    <li class="header">菜单</li>
                    <li id="admin-index"><a href="admin/home.html" target="iframe"><i class="nav-icon fas fa-book"></i> <span>首页</span></a></li>

				    <!-- 菜单 -->
					<li class="treeview">
				        <a href="#">
				            <i class="nav-icon fas fa-tachometer-alt" ></i>
				            <span> 设备管理</span>
				            <span class="pull-right-container">
				       			<i class="right fas fa-angle-left"></i>
				   		 	</span>
				        </a>
				        <ul class="treeview-menu">
				            <li>
				                <a href="admin/device.html?sessionId={{sessionId}}" target="iframe">
				                    <i class="nav-icon fas fa-circle-notch"></i> 设备管理
				                </a>
				            </li>
							<li>
				                <a href="admin/pushAlarm.html" target="iframe">
				                    <i class="nav-icon fas fa-circle-notch"></i> 报警管理
				                </a>
				            </li>
							<li>
				                <a href="admin/apply.html" target="iframe">
				                    <i class="nav-icon fas fa-circle-notch"></i> 申请管理
				                </a>
				            </li>
				        </ul>                        
				    </li>
					
					<li class="treeview" sec:authorize="hasRole('SUPPER')">
				        <a href="#">
				            <i class="nav-icon fas fa-user"></i>
				            <span> 后台管理</span>
				            <span class="pull-right-container">
				       			<i class="fa fa-angle-left pull-right"></i>
				   		 	</span>
				        </a>
				        <ul class="treeview-menu">
                            <li sec:authorize="hasRole('SUPPER')">
                                <a href="admin/server.html" target="iframe">
                                    <i class="nav-icon fas fa-circle-notch"></i> 服务器管理
                                </a>
                            </li>
				            <li sec:authorize="hasRole('SUPPER')">
				                <a href="admin/user.html" target="iframe">
				                    <i class="nav-icon fas fa-circle-notch"></i> 用户管理
				                </a>
				            </li>
                            <!--<li sec:authorize="hasRole('SUPPER')">
                                <a href="admin/device_manage.html?sessionId={{sessionId}}" target="iframe">
                                    <i class="nav-icon fas fa-circle-notch"></i> 设备管理
                                </a>
                            </li>-->
				        </ul>                        
				    </li>

                    <li class="treeview" sec:authorize="hasRole('SUPPER')">
                        <a href="#">
                            <i class="nav-icon fas fa-edit"></i>
                            <span> 日志管理</span>
                            <span class="pull-right-container">
				       			<i class="fa fa-angle-left pull-right"></i>
				   		 	</span>
                        </a>
                        <ul class="treeview-menu">
                            <li>
                                <a href="admin/logger.html" target="iframe">
                                    <i class="nav-icon fas fa-circle-notch"></i> 日志管理
                                </a>
                            </li>
                        </ul>
                    </li>
				    <!-- 菜单 /-->

                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>
        <!-- 导航侧栏 /-->

        <!-- 内容区域 -->
        <div class="content-wrapper">
			<iframe style="margin-bottom: 0;padding-bottom: 0" width="100%" id="iframe" name="iframe"	onload="SetIFrameHeight()"
					frameborder="0" src="admin/home.html"></iframe>
 
        </div>
        <!-- 内容区域 /-->

        <!-- 底部导航 -->
        <footer class="main-footer">
            <div class="pull-right hidden-xs">
                <b>Version</b> 1.0.0
            </div>
            <strong>Copyright &copy; 2023 <a href="http://www.sensorsun.com">宁波盛轩电子科技有限公司</a>.</strong> All rights reserved.
        </footer>
        <!-- 底部导航 /-->

    </div>

</body>
<script>

</script>
</html>